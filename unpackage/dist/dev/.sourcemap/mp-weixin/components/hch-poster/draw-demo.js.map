{"version":3,"sources":["webpack:////Users/chenping/kalastar/tailup/uniapp/components/hch-poster/draw-demo.vue?dad7","webpack:////Users/chenping/kalastar/tailup/uniapp/components/hch-poster/draw-demo.vue?0d93","webpack:////Users/chenping/kalastar/tailup/uniapp/components/hch-poster/draw-demo.vue?cfaa","webpack:////Users/chenping/kalastar/tailup/uniapp/components/hch-poster/draw-demo.vue?d88d","uni-app:///components/hch-poster/draw-demo.vue","webpack:////Users/chenping/kalastar/tailup/uniapp/components/hch-poster/draw-demo.vue?c15a"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":"gIAAA,yHACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,sCACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,8GAAu1B,eAAG,G,gHCmD11B,a,EACA,CACA,KADA,WAEA,OACA,kBACA,UACA,cACA,SAEQ,EAAR,GACA,KACA,IACQ,EAAR,GACQ,EAAR,IAEA,SAEQ,EAAR,GACA,KACA,KACQ,EAAR,GACQ,EAAR,IAEA,SAEQ,EAAR,GACA,KACA,KACQ,EAAR,GACQ,EAAR,IAEA,MACA,KACA,KACA,+DACA,IACQ,EAAR,IACQ,EAAR,KAEA,OACA,IACA,KACA,mBACA,YACQ,MAAR,OACQ,WAAR,GACQ,GAAR,GAEA,OACA,IACA,KACA,mBACA,YACQ,MAAR,OACQ,WAAR,GACQ,GAAR,EACQ,MAAR,UAEA,OACA,IACA,KACA,mBACA,YACQ,MAAR,MACQ,WAAR,GACQ,GAAR,EACQ,MAAR,WAIA,QArEA,WAuEI,KAAJ,0BAEA,SAOA,WAPA,SAOA,GACA,oCACA,mBACA,cAMI,KAhBJ,SAgBA,GACM,EAAN,aACQ,MAAR,WAEA,UACQ,KAAR,+CACQ,KAAR,eAEQ,KAAR,8CAEM,IAAN,UACM,GAAN,yDAEQ,EAAR,iBACQ,KAAR,IACQ,EAAR,EACQ,EAAR,EACQ,EAAR,EACQ,EAAR,EACQ,EAAR,EACQ,EAAR,UAIA,qBACQ,KAAR,IACQ,EAAR,KACQ,EAAR,EACQ,EAAR,EACQ,KAAR,SACQ,EAAR,SACQ,EAAR,MACQ,EAAR,WACQ,EAAR,OAIM,EAAN,eAQI,aA7DJ,WA8DM,KAAN,iB,2EC3LA,8GAAsjD,eAAG,G","file":"components/hch-poster/draw-demo.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./draw-demo.vue?vue&type=template&id=3a816c45&\"\nvar renderjs\nimport script from \"./draw-demo.vue?vue&type=script&lang=js&\"\nexport * from \"./draw-demo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./draw-demo.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/hch-poster/draw-demo.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./draw-demo.vue?vue&type=template&id=3a816c45&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./draw-demo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./draw-demo.vue?vue&type=script&lang=js&\"","<!--\r\n * @Description: 生成海报组件\r\n * @Version: 1.0.0\r\n * @Autor: hch\r\n * @Date: 2020-08-07 14:48:41\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2021-07-30 09:25:07\r\n * 保存海报按钮和关闭按钮 在html代码中写出来 绑定点击方法然后透明 再用canvas 覆盖\r\n-->\r\n\r\n<template>\r\n  <view class=\"content\">\r\n    <view class=\"btn\" @tap=\"handleDraw('square1')\">正方形</view>\r\n    <view class=\"btn\" @tap=\"handleDraw('square2')\">圆角方形</view>\r\n    <view class=\"btn\" @tap=\"handleDraw('square3')\">圆形</view>\r\n    <view class=\"btn\" @tap=\"handleDraw('pic1')\">图片</view>\r\n    <view class=\"btn\" @tap=\"handleDraw('text1')\">左对齐文本</view>\r\n    <view class=\"btn\" @tap=\"handleDraw('text2')\">居中对齐文本</view>\r\n    <view class=\"btn\" @tap=\"handleDraw('text3')\">右对齐文本</view>\r\n\r\n    <view\r\n      class=\"canvas-content\"\r\n      v-show=\"canvasShow\"\r\n      :style=\"'width:' + system.w + 'px; height:' + system.h + 'px;'\"\r\n    >\r\n      <!-- 遮罩层 -->\r\n      <view class=\"canvas-mask\"></view>\r\n      <!-- :width=\"system.w\" :height=\"system.h\" 支付宝必须要这样设置宽高才有效果 -->\r\n      <canvas\r\n        class=\"canvas\"\r\n        :canvas-id=\"canvasId\"\r\n        :id=\"canvasId\"\r\n        :style=\"'width:' + system.w + 'px; height:' + system.h + 'px;'\"\r\n        :width=\"system.w\"\r\n        :height=\"system.h\"\r\n      ></canvas>\r\n      <view class=\"button-wrapper\">\r\n        <!-- 保存海报按钮 -->\r\n        <!-- #ifndef MP-QQ -->\r\n        <!-- cover-view 标签qq小程序有问题 -->\r\n        <cover-view class=\"save-btn cancel-btn\" @tap=\"handleCancel\">取消</cover-view>\r\n        <!-- #endif -->\r\n        <!-- #ifdef MP-QQ -->\r\n        <view class=\"save-btn cancel-btn\" @tap=\"handleCancel\">取消</view>\r\n        <!-- #endif -->\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import { drawSquarePic, drawTextReturnH, getSystem } from './utils'\r\n  export default {\r\n    data() {\r\n      return {\r\n        canvasId: 'canvas',\r\n        system: {},\r\n        canvasShow: false,\r\n        square1: {\r\n          //正方形\r\n          x: 40,\r\n          y: 40,\r\n          r: 0, //圆角半径\r\n          w: 80, //宽度\r\n          h: 80 //高度\r\n        },\r\n        square2: {\r\n          //圆角方形\r\n          x: 40,\r\n          y: 40,\r\n          r: 10, //圆角半径\r\n          w: 80, //宽度\r\n          h: 80 //高度\r\n        },\r\n        square3: {\r\n          //圆形\r\n          x: 40,\r\n          y: 40,\r\n          r: 40, //圆角半径\r\n          w: 80, //宽度\r\n          h: 80 //高度\r\n        },\r\n        pic1: {\r\n          x: 40,\r\n          y: 40,\r\n          url: 'https://huangchunhongzz.gitee.io/imgs/poster/product.png',\r\n          r: 0, //圆角半径\r\n          w: 250, //宽度\r\n          h: 200 //高度\r\n        },\r\n        text1: {\r\n          x: 0,\r\n          y: 40,\r\n          text: '今日上新水果，牛奶草莓',\r\n          fontSize: 16, //字体大小\r\n          color: '#000', //颜色\r\n          lineHeight: 25, //行高\r\n          mt: 0 //margin-top\r\n        },\r\n        text2: {\r\n          x: 0,\r\n          y: 40,\r\n          text: '今日上新水果，牛奶草莓',\r\n          fontSize: 16, //字体大小\r\n          color: 'blue', //颜色\r\n          lineHeight: 25, //行高\r\n          mt: 0, //margin-top\r\n          align: 'center' //对齐方式\r\n        },\r\n        text3: {\r\n          x: 0,\r\n          y: 40,\r\n          text: '今日上新水果，牛奶草莓',\r\n          fontSize: 16, //字体大小\r\n          color: 'red', //颜色\r\n          lineHeight: 25, //行高\r\n          mt: 0, //margin-top\r\n          align: 'right' //对齐方式\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      // 获取设备信息\r\n      this.system = getSystem()\r\n    },\r\n    methods: {\r\n      /**\r\n       * @description: 展示海报\r\n       * @param {type}\r\n       * @return {type}\r\n       * @author: hch\r\n       */\r\n      handleDraw(type) {\r\n        console.log('handleDraw -> type', type)\r\n        this.canvasShow = true\r\n        this.draw(type)\r\n      },\r\n      /**\r\n       * @description: 绘制\r\n       * @author: hch\r\n       */\r\n      draw(type) {\r\n        uni.showLoading({\r\n          title: '绘制中...'\r\n        })\r\n        if (this.ctx) {\r\n          this.ctx.clearRect(0, 0, this.system.w, this.system.h) //清空之前的海报\r\n          this.ctx.restore() //恢复之前被切割的canvas，否则切割之外的就没办法用\r\n        } else {\r\n          this.ctx = uni.createCanvasContext(this.canvasId, this)\r\n        }\r\n        let drawData = this[type]\r\n        if (type === 'square1' || type === 'square2' || type === 'square3' || type === 'pic1') {\r\n          // 绘制图像/图片\r\n          drawSquarePic(\r\n            this.ctx,\r\n            drawData.x,\r\n            drawData.y,\r\n            drawData.w,\r\n            drawData.h,\r\n            drawData.r,\r\n            drawData.url\r\n          )\r\n        } else {\r\n          // 绘制文本\r\n          let textY = drawTextReturnH(\r\n            this.ctx,\r\n            drawData.text,\r\n            drawData.x,\r\n            drawData.y,\r\n            this.system.w,\r\n            drawData.fontSize,\r\n            drawData.color,\r\n            drawData.lineHeight,\r\n            drawData.align\r\n          )\r\n        }\r\n\r\n        uni.hideLoading()\r\n      },\r\n      /**\r\n       * @description: 取消海报\r\n       * @param {type}\r\n       * @return {type}\r\n       * @author: hch\r\n       */\r\n      handleCancel() {\r\n        this.canvasShow = false\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  .content {\r\n    margin-bottom: 80rpx;\r\n    overflow: hidden;\r\n    border-bottom: 1rpx solid $uni-border-color;\r\n\r\n    .btn {\r\n      float: left;\r\n      width: 30%;\r\n      margin: 10rpx;\r\n      font-size: 30rpx;\r\n      line-height: 72rpx;\r\n      color: #fff;\r\n      text-align: center;\r\n      background: $uni-btn-color;\r\n      border-radius: 45rpx;\r\n      border-radius: 36rpx;\r\n    }\r\n  }\r\n\r\n  .canvas-content {\r\n    position: absolute;\r\n    top: 0;\r\n    z-index: 9;\r\n\r\n    .canvas-mask {\r\n      position: fixed;\r\n      top: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n      z-index: 9;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: $uni-btn-color;\r\n    }\r\n\r\n    .canvas {\r\n      z-index: 10;\r\n    }\r\n\r\n    .button-wrapper {\r\n      position: fixed;\r\n      bottom: 20rpx;\r\n      z-index: 16;\r\n      display: flex;\r\n      width: 100%;\r\n      height: 72rpx;\r\n      justify-content: space-around;\r\n    }\r\n\r\n    .save-btn {\r\n      z-index: 16;\r\n      width: 40%;\r\n      height: 100%;\r\n      font-size: 30rpx;\r\n      line-height: 72rpx;\r\n      color: #fff;\r\n      text-align: center;\r\n      background: $uni-btn-color;\r\n      border-radius: 45rpx;\r\n      border-radius: 36rpx;\r\n    }\r\n\r\n    .cancel-btn {\r\n      color: $uni-btn-color;\r\n      background: #fff;\r\n    }\r\n\r\n    .canvas-close-btn {\r\n      position: fixed;\r\n      top: 30rpx;\r\n      right: 0;\r\n      z-index: 12;\r\n      width: 60rpx;\r\n      height: 60rpx;\r\n      padding: 20rpx;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./draw-demo.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./draw-demo.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}