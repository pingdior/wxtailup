{"version":3,"sources":["uni-app:///main.js","webpack:////Users/chenping/7 kalastar/tailup/uniapp/pages/tabBar/main/index.vue?e7a1","webpack:////Users/chenping/7 kalastar/tailup/uniapp/pages/tabBar/main/index.vue?8501","webpack:////Users/chenping/7 kalastar/tailup/uniapp/pages/tabBar/main/index.vue?fd08","webpack:////Users/chenping/7 kalastar/tailup/uniapp/pages/tabBar/main/index.vue?e796","uni-app:///pages/tabBar/main/index.vue","webpack:////Users/chenping/7 kalastar/tailup/uniapp/pages/tabBar/main/index.vue?62c4","webpack:////Users/chenping/7 kalastar/tailup/uniapp/pages/tabBar/main/index.vue?f507"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,kG,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAAk1B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2It2B;AACA;;AAEA,+C,wnCADA;;;;;AAMA,uC;AACA;AACA;AACA;AACA,oEADA;AAEA,oFAFA,GADA;;AAKA;AACA;AACA,KAPA,GADA;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA,EADA,EAVA;;;AAoBA,MApBA,kBAoBA;AACA;AACA,uBADA;AAEA;AACA,kBADA;AAEA,mBAFA;;AAIA;AACA,kBADA;AAEA,oBAFA,EAJA,CAFA;;;AAWA,uBAXA;AAYA,4BAZA,EAYA;AACA,wBAbA,EAaA;AACA,6BAdA,EAcA;;AAEA,kBAhBA;AAiBA,0BAjBA;AAkBA,yBAlBA;AAmBA,iBAnBA;AAoBA,oBApBA;AAqBA,wBArBA;AAsBA,oEAtBA;;AAwBA,0BAxBA;AAyBA,uBAzBA;AA0BA,wBA1BA,EA0BA;AACA,mBA3BA;AA4BA;AACA,uBA7BA,EA6BA;AACA;AACA,yCA/BA;;AAiCA,oBAjCA,EAiCA;AACA,sBAlCA,CAkCA;AAlCA;AAoCA,GAzDA;AA0DA;AACA;AACA,SADA;AAEA,eAFA;AAGA,eAHA;AAIA,iBAJA;AAKA,iBALA,EADA;;AAQA,sBARA,gCAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAfA;AAgBA,sBAhBA,gCAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAxBA;AAyBA,qBAzBA,+BAyBA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,oBAFA;;AAIA;AACA,OANA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA1CA;AA2CA,kBA3CA,4BA2CA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KA5DA;AA6DA,qBA7DA,+BA6DA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,sBAFA;;AAIA,SALA,CAKA;AACA;AACA;AACA;AACA;AACA,KA3EA;AA4EA,kBA5EA,4BA4EA;AACA;AACA,wBADA;AAEA,gCAFA;AAGA,kCAHA;AAIA,4BAJA,CAIA;AAJA;AAMA,KAnFA;AAoFA;AACA,YArFA,oBAqFA,CArFA,EAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAPA,MAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA,qCADA;AAEA;AACA;AACA;AACA,aALA;;AAOA,SATA,CASA;AACA;AACA;AACA;AACA,OApBA,MAoBA;AACA;AACA;AACA,SAFA,CAEA;AACA;AACA;AACA;AACA;AACA,sCADA;AAEA;AACA;AACA;AACA,aALA;;AAOA,SARA,CAQA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA,OATA,MASA;AACA;AACA;AACA;AACA;AACA;AACA,KA/JA;AAgKA;AACA,qBAjKA,6BAiKA,OAjKA,EAiKA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAhLA;AAiLA;AACA,kBAlLA,0BAkLA,CAlLA,EAkLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA/LA;AAgMA;AACA,aAjMA,qBAiMA,CAjMA,EAiMA;AACA;AACA;AACA;AACA,uBADA;AAEA,oBAFA;;AAIA,KAxMA;;AA0MA;AACA,YA3MA,oBA2MA,CA3MA,EA2MA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAFA,EAEA,GAFA;AAGA;AACA,KArNA;AAsNA,gBAtNA,wBAsNA,CAtNA,EAsNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA,OATA,MASA;AACA;AACA;AACA;AACA;AACA;AACA,KAxOA;;AA0OA;AACA,oBA3OA,4BA2OA,CA3OA,EA2OA;AACA;AACA;AACA,KA9OA;;AAgPA;AACA,qBAjPA,+BAiPA;AACA;AACA,kBADA,CACA;AACA,oBADA,EADA;;AAIA,UAJA,CAIA;AACA;AACA;AACA;AACA;AACA,OATA;AAUA,KA5PA;AA6PA;AACA,iBA9PA,2BA8PA;AACA;AACA,kBADA,CACA;AACA,mBADA,EADA;;AAIA,UAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA,OAVA;AAWA,KA1QA;AA2QA;AACA,mBA5QA,2BA4QA,IA5QA,EA4QA;AACA;AACA;AACA,qBADA;AAEA,kBAFA;AAGA,mBAJA;;AAMA,KAnRA;AAoRA;AACA,iBArRA,yBAqRA,IArRA,EAqRA;AACA;AACA,kEADA;;AAGA,KAzRA;AA0RA;AACA,WA3RA,mBA2RA,IA3RA,EA2RA;AACA;AACA,iBADA,CACA;AACA,+BADA,EADA;;AAIA,UAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAbA;AAcA,KA1SA;AA2SA;AACA,kBA5SA,4BA4SA;AACA;AACA,iBADA,CACA;AACA,mBADA,EADA;;AAIA,UAJA,CAIA;AACA;AACA,OANA;AAOA,KApTA;AAqTA;AACA,YAtTA,oBAsTA,IAtTA,EAsTA;AACA;AACA;AACA;AACA,qBADA;AAEA,gBAFA;AAGA,uBAJA;;AAMA,KA9TA;AA+TA;AACA,UAhUA,kBAgUA,IAhUA,EAgUA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,GAFA;AAGA,KAtUA;AAuUA;AACA,WAxUA,mBAwUA,IAxUA,EAwUA;AACA;AACA;AACA,uFADA;;AAGA,KA7UA;AA8UA;AACA,YA/UA,sBA+UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,oCAFA;;AAIA,SALA,CAKA;AACA;AACA;AACA;;AAEA;AACA,OAdA,MAcA;AACA;AACA;AACA;AACA,gCADA;AAEA,oCAFA;;AAIA,SALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA,KA5WA;AA6WA,kBA7WA,4BA6WA;AACA;AACA;AACA,oBADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,gDAFA;;AAIA,aANA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAtBA;AAuBA;AACA;AACA,SAzBA;;AA2BA,KA1YA;AA2YA,mBA3YA;AA4YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,sBAFA;AAGA,4BAJA;;AAMA,SARA;AASA;AACA;AACA;AACA,2EADA;;AAGA;AACA;AACA,KA/ZA;AAgaA,kBAhaA,4BAgaA;AACA;AACA;AACA,oDADA;AAEA,8BAFA;AAGA,wCAHA;AAIA,4CAJA;AAKA,UALA,CAKA;AACA;AACA;AACA;AACA;AACA,kCADA;AAEA,yBAFA;;AAIA;AACA;;AAEA;AACA,WATA,CASA;AACA;AACA;AACA;AACA;AACA;AACA,OAvBA;AAwBA,KA1bA;AA2bA,cA3bA;AA4bA;AACA;AACA;AACA;AACA,4BADA;AAEA;AACA;AACA;AACA,SALA;;AAOA;AACA,0BADA;AAEA;AACA;AACA;AACA,SALA;;AAOA,KA7cA,GA1DA;;AAygBA;;;AAGA,QA5gBA,oBA4gBA;AACA;AACA,GA9gBA;;AAghBA,QAhhBA,oBAghBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAvhBA,E;;;;;;;;;;;;;ACpJA;AAAA;AAAA;AAAA;AAAqsC,CAAgB,gmCAAG,EAAC,C;;;;;;;;;;;ACAztC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/tabBar/main/index.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/tabBar/main/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=39b969c4&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/tabBar/main/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=39b969c4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    !_vm.isFocusTab && _vm.videoRecommendList.length > 0\n      ? _vm.__map(_vm.videoRecommendList, function(item, index) {\n          var $orig = _vm.__get_orig(item)\n\n          var m0 =\n            item && _vm.currIndex == index\n              ? _vm.isVerticalShow(item.height, item.width)\n              : null\n          return {\n            $orig: $orig,\n            m0: m0\n          }\n        })\n      : null\n  var l1 =\n    !(!_vm.isFocusTab && _vm.videoRecommendList.length > 0) &&\n    _vm.videoFocusList.length > 0\n      ? _vm.__map(_vm.videoFocusList, function(item, indexFocus) {\n          var $orig = _vm.__get_orig(item)\n\n          var m1 =\n            item && _vm.currIndex == indexFocus\n              ? _vm.isVerticalShow(item.height, item.width)\n              : null\n          return {\n            $orig: $orig,\n            m1: m1\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"w-page page-main\">\r\n\t\t<!-- <fatherLogin ref=\"fatherLoginRef\" /> -->\r\n\t\t<van-tabs id=\"tabs\" class=\"tab-content\" :active=\"isFocusTab\" @change=\"onChange\">\r\n\t\t\t<van-tab v-for=\"itemTab in tabs\" :title=\"itemTab.name\" :key=\"itemTab.id\" :name=\"itemTab.id\">\r\n\t\t\t</van-tab>\r\n\t\t</van-tabs>\r\n\t\t<swiper v-if=\"!isFocusTab&&videoRecommendList.length>0\" class=\"swiper-container\" vertical @change=\"swiperchange\"\r\n\t\t\t@animationfinish=\"swiperanimateend\" duration=\"600\" :current=\"currIndex\">\r\n\t\t\t<swiper-item v-for=\"(item, index) in videoRecommendList\" :key=\"index\">\r\n\t\t\t\t<view v-if=\"item\" class=\"video-container\">\r\n\t\t\t\t\t<view class=\"right-side\">\r\n\t\t\t\t\t\t<view @click=\"toAnimalDetails(item)\" class=\"right-side-item\">\r\n\t\t\t\t\t\t\t<view class=\"right-side-item-icon-wrapper\">\r\n\t\t\t\t\t\t\t\t<image class=\"animal-avator\" :src=\"item.headImageId\" />\r\n\t\t\t\t\t\t\t\t<view @click.stop=\"toFocus(item)\" v-if=\"!item.focused\" class=\"focus-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<icon class=\"focus-icon iconfont icon-add\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"right-side-item-text\"\r\n\t\t\t\t\t\t\t\tstyle=\"height: 35rpx;overflow: hidden\">{{ item.animalName }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view @tap.stop=\"toDonate(item)\" class=\"right-side-item\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<image class=\"donate-cake\" src=\"/static/images/cake/cake.png\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"right-side-item-text\">稀罕</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view @click.stop=\"toLike(item)\" class=\"right-side-item\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<icon :class=\"{\r\n                    'iconfont icon-heart': true,\r\n                    'color-fail': item.like,\r\n                  }\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"right-side-item-text\">点赞</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view @click.stop=\"toShare(item)\" class=\"right-side-item\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<icon class=\"iconfont icon-share\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"right-side-item-text\">分享</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"bottom-side\">\r\n\t\t\t\t\t\t<view class=\"bottom-item\">\r\n\t\t\t\t\t\t\t<view class=\"bottom-avator-wrapper\">\r\n\t\t\t\t\t\t\t\t<image class=\"avator-image\" :src=\"item.baseImgUrl\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"bottom-name-wrapper\" @click=\"toBaseDetails(item)\">\r\n\t\t\t\t\t\t\t\t<text class=\"bottom-name\">@{{ item.baseName }}</text>\r\n\t\t\t\t\t\t\t\t<icon class=\"iconfont icon-right\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"item.succorStatus\" class=\"bottom-side-description\">\r\n\t\t\t\t\t\t\t{{ item.name }}({{item.succorStatus}})\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-else class=\"bottom-side-description\">{{ item.name }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<my-player v-if=\"currIndex == index\" class=\"my-player\" :appid=\"videoID\" :fileid=\"item.fileId\"\r\n\t\t\t\t\t\t:playerid=\"playerid\" :controls=\"false\" autoplay=\"true\" :loop=\"true\" width=\"100%\" height=\"100%\"\r\n\t\t\t\t\t\t:object-fit=\"isVerticalShow(item.height,item.width)\" @bindplay=\"bindplay\"\r\n\t\t\t\t\t\t@bindtimeupdate=\"bindtimeupdate\" @binderror=\"binderror\" :title=\"item.title\"\r\n\t\t\t\t\t\t:showCenterPlayBtn=\"false\" />\r\n\t\t\t\t\t<image v-else :src=\"item.coverImage\" style=\"width:100%;height:100%;z-index=10\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</swiper-item>\r\n\t\t</swiper>\r\n\t\t<swiper v-else-if=\"videoFocusList.length>0\" class=\"swiper-container\" vertical @change=\"swiperchange\"\r\n\t\t\t@animationfinish=\"swiperanimateend\" duration=\"600\" :current=\"currIndex\">\r\n\t\t\t<swiper-item v-for=\"(item, indexFocus) in videoFocusList\" :key=\"indexFocus\">\r\n\t\t\t\t<view v-if=\"item\" class=\"video-container\">\r\n\t\t\t\t\t<view class=\"right-side\">\r\n\t\t\t\t\t\t<view @click=\"toAnimalDetails(item)\" class=\"right-side-item\">\r\n\t\t\t\t\t\t\t<view class=\"right-side-item-icon-wrapper\">\r\n\t\t\t\t\t\t\t\t<image class=\"animal-avator\" :src=\"item.headImageId\" />\r\n\t\t\t\t\t\t\t\t<view @click.stop=\"toFocus(item)\" v-if=\"!item.focused\" class=\"focus-wrapper\">\r\n\t\t\t\t\t\t\t\t\t<icon class=\"focus-icon iconfont icon-add\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"right-side-item-text\"\r\n\t\t\t\t\t\t\t\tstyle=\"height: 35rpx;overflow: hidden\">{{ item.animalName }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view @tap.stop=\"toDonate(item)\" class=\"right-side-item\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<image class=\"donate-cake\" src=\"/static/images/cake/cake.png\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"right-side-item-text\">稀罕</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view @click.stop=\"toLike(item)\" class=\"right-side-item\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<icon :class=\"{\r\n\t\t\t        'iconfont icon-heart': true,\r\n\t\t\t        'color-fail': item.like,\r\n\t\t\t      }\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"right-side-item-text\">点赞</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view @click.stop=\"toShare(item)\" class=\"right-side-item\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<icon class=\"iconfont icon-share\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"right-side-item-text\">分享</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"bottom-side\">\r\n\t\t\t\t\t\t<view class=\"bottom-item\">\r\n\t\t\t\t\t\t\t<view class=\"bottom-avator-wrapper\">\r\n\t\t\t\t\t\t\t\t<image class=\"avator-image\" :src=\"item.baseImgUrl\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"bottom-name-wrapper\" @click=\"toBaseDetails(item)\">\r\n\t\t\t\t\t\t\t\t<text class=\"bottom-name\">@{{ item.baseName }}</text>\r\n\t\t\t\t\t\t\t\t<icon class=\"iconfont icon-right\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"item.succorStatus\" class=\"bottom-side-description\">\r\n\t\t\t\t\t\t\t{{ item.name }}({{item.succorStatus}})\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-else class=\"bottom-side-description\">{{ item.name }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<my-player v-if=\"currIndex == indexFocus\" class=\"my-player\" :appid=\"videoID\" :fileid=\"item.fileId\"\r\n\t\t\t\t\t\t:playerid=\"playerid\" width=\"100%\" height=\"100%\" :controls=\"false\" autoplay=\"true\" :loop=\"true\"\r\n\t\t\t\t\t\t:object-fit=\"isVerticalShow(item.height,item.width)\" @bindplay=\"bindplay\"\r\n\t\t\t\t\t\t@bindtimeupdate=\"bindtimeupdate\" @binderror=\"binderror\" :title=\"item.title\"\r\n\t\t\t\t\t\t:showCenterPlayBtn=\"false\" />\r\n\t\t\t\t\t<image v-else :src=\"item.coverImage\" style=\"width:100%;height:100%;z-index=10\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</swiper-item>\r\n\t\t</swiper>\r\n\t\t<view v-if=\"hasFirstLogin\" class=\"page-bottom-btns\">\r\n\t\t\t<button class=\"btn\" type=\"primary\" plain=\"true\" @click=\"getUserProfile\">\r\n\t\t\t\t看见生命看见爱❤请点击登录授权\r\n\t\t\t</button>\r\n\t\t</view>\r\n\t\t<button v-if=\"hasFirstLogin\" @click=\"getUserProfile\" class='get-info'>请授权！</button>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport api from \"../../../utils/api/index\";\r\n\timport animalApi from \"../../../utils/api/animal\";\r\n\tconst globalConst = require(\"../../../utils/service\");\r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapActions,\r\n\t\tmapState,\r\n\t} from \"vuex\";\r\n\tconst plugin = requirePlugin(\"myPlugin\");\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tisAuthed: (state) => state.user.hasLogin,\r\n\t\t\t\tappUserInfoFirst: (state) => state.user.userInfo,\r\n\t\t\t}),\r\n\t\t\tgetAuthed: function() {\r\n\t\t\t\treturn this.isAuthed;\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tgetAuthed: {\r\n\t\t\t\thandler: function() {\r\n\t\t\t\t\tif (this.isAuthed) {\r\n\t\t\t\t\t\tconsole.log(\"initOnloadData use!\");\r\n\t\t\t\t\t\tthis.initData();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisFocusTab: false,\r\n\t\t\t\ttabs: [{\r\n\t\t\t\t\t\tname: \"最新\",\r\n\t\t\t\t\t\tvalue: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"关注\",\r\n\t\t\t\t\t\tvalue: false\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tplayerid: \"video\",\r\n\t\t\t\tvideoRecommendList: [], // 推荐视频列表\r\n\t\t\t\tvideoFocusList: [], // 关注视频列表\r\n\t\t\t\tvideoFocusBackList: [1], // 空关注视频显示写定视频\r\n\r\n\t\t\t\tcurrIndex: 0,\r\n\t\t\t\tcurrTimeStr: \"00:00\",\r\n\t\t\t\tendTimeStr: \"00:00\",\r\n\t\t\t\tduration: 0,\r\n\t\t\t\tsliderValue: 0,\r\n\t\t\t\tshowPlayBtn: false,\r\n\t\t\t\tdefaultFocusBackPic: [\"../../../static/images/focusBack.jpeg\"],\r\n\r\n\t\t\t\thasFirstLogin: false,\r\n\t\t\t\tbSwipeDown: false,\r\n\t\t\t\tisClickSide: false, // 是否点击侧边栏\r\n\t\t\t\tloginCode: \"\",\r\n\t\t\t\t// bAfterLoad: false, // 登陆之后表示为true\r\n\t\t\t\tbFromshare: false, // 是否来自分享页\r\n\t\t\t\t// ddanmulist: [\"test1\",\"test2\",\"test3\"],\r\n\t\t\t\tvideoID: globalConst.videoDataAppId,\n\t\t\t\t\n\t\t\t\tshareBaseId:0, \t\t\t\t// 分享页的基地ID\n\t\t\t\tshareAnamalId:0, \t\t\t// 分享页的动物ID\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations(\"user\", [\r\n\t\t\t\t\"login\",\r\n\t\t\t\t\"setProvider\",\r\n\t\t\t\t\"setUserInfo\",\r\n\t\t\t\t\"setWxUserInfo\",\r\n\t\t\t\t\"setFirstLogin\",\r\n\t\t\t]),\r\n\t\t\tinitSingleFlowData() {\r\n\t\t\t\tconsole.log(\"enter initSingleFlowData!\");\r\n\t\t\t\tthis.selectComponent(\"#tabs\").resize();\r\n\t\t\t\t// 需要请求多条可以是swiper有滑动\r\n\t\t\t\tfor (let i = 0; i < 2; i++) {\r\n\t\t\t\t\tthis.getRecommendVideo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinitDoubleFlowData() {\r\n\t\t\t\tconsole.log(\"enter initDoubleFlowData!\");\r\n\t\t\t\tthis.selectComponent(\"#tabs\").resize();\r\n\t\t\t\t// 需要请求多条可以是swiper有滑动\r\n\t\t\t\tfor (let i = 0; i < 2; i++) {\r\n\t\t\t\t\tthis.getRecommendVideo();\r\n\t\t\t\t\tthis.getFocusVideo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinitFocusFlowData() {\r\n\t\t\t\tconsole.log(\"enter initFocusFlowData!\");\r\n\t\t\t\tthis.selectComponent(\"#tabs\").resize();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tuni.setStorageSync({\r\n\t\t\t\t\t\tkey: \"hasFirstLogin\",\r\n\t\t\t\t\t\tdata: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.hasFirstLogin = true;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\tconsole.log(\"setStorageSync hasFirstLogin exception!\");\r\n\t\t\t\t}\r\n\t\t\t\t// 需要请求多条可以是swiper有滑动\r\n\t\t\t\tfor (let i = 0; i < 2; i++) {\r\n\t\t\t\t\tthis.getFocusVideo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tisVerticalShow(height = 1.0, width = 1.0) {\r\n\t\t\t\tvar hwValue = 1.0;\r\n\t\t\t\tif (height && width) {\r\n\t\t\t\t\thwValue = height / width;\r\n\t\t\t\t\tconsole.log(\"isVerticalShow hwValue:\", hwValue);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"isVerticalShow hwValue none\");\r\n\t\t\t\t\treturn \"cover\"\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (hwValue > 1) {\r\n\t\t\t\t\tconsole.log(\"isVerticalShow hwValue cover hwValue > 1\");\r\n\t\t\t\t\treturn \"cover\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"isVerticalShow hwValue contain\");\r\n\t\t\t\t\treturn \"contain\";\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thasFirstLoginInit() {\r\n\t\t\t\tif (!this.appUserInfoFirst.nickName || this.appUserInfoFirst.nickName.length < 1) {\r\n\t\t\t\t\tconsole.log(\"appUserInfoFirst not exict!\");\r\n\t\t\t\t\tthis.hasFirstLogin = true;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.setStorageSync({\r\n\t\t\t\t\t\t\tkey: \"hasFirstLogin\",\r\n\t\t\t\t\t\t\tdata: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\t\tconsole.log(\"setStorageSync hasFirstLogin exception!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetTabBarStyle() {\r\n\t\t\t\tuni.setTabBarStyle({\r\n\t\t\t\t\tcolor: \"#ACB2BA\",\r\n\t\t\t\t\tselectedColor: \"#64C8B3\",\r\n\t\t\t\t\tbackgroundColor: \"#282930\",\r\n\t\t\t\t\tborderStyle: \"black\", // 否\ttabBar上边框的颜色， 仅支持 black/white\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 推荐和关注切换\r\n\t\t\tonChange(e) {\r\n\t\t\t\tif (!this.isFocusTab) {\r\n\t\t\t\t\tconsole.log(\"enter onChange !isFocus :\", this.isFocusTab);\r\n\t\t\t\t\t// 登陆成功后，拉取数据\r\n\t\t\t\t\tif (!this.appUserInfoFirst.nickName || this.appUserInfoFirst.nickName.length < 1) {\r\n\t\t\t\t\t\tconsole.log(\"appUserInfoFirst not exict!\");\r\n\t\t\t\t\t\tthis.initFocusFlowData();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"enter onChange isFocus :\", this.isFocusTab);\r\n\t\t\t\t\t// 登陆成功后，拉取数据\r\n\t\t\t\t\tif (!this.appUserInfoFirst.nickName || this.appUserInfoFirst.nickName.length < 1) {\r\n\t\t\t\t\t\tconsole.log(\"appUserInfoFirst not exict!\");\r\n\t\t\t\t\t\tthis.initSingleFlowData();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.isFocusTab = !this.isFocusTab;\r\n\t\t\t\tconsole.log(\"enter onChange focusTab state:\", this.isFocusTab);\r\n\r\n\t\t\t\tif (this.isFocusTab) {\r\n\t\t\t\t\t//存最新，取关注索引\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.setStorageSync('mainPageCommitIndex', this.currIndex);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.log(\"onChange setStorageSync mainPageCommitIndex fail!\");\r\n\t\t\t\t\t};\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t//从本地缓存中 同步获取指定 key 对应的内容\r\n\t\t\t\t\t\tuni.getStorageSync({\r\n\t\t\t\t\t\t\tkey: 'mainPageFocusIndex',\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tconsole.log('onChange mainFocusIndex异步获取 = ' + res.data);\r\n\t\t\t\t\t\t\t\tthis.currIndex = res.data;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\t\tconsole.log(\"getStorageSync mainPageFocusIndex exception!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.setStorageSync('mainPageFocusIndex', this.currIndex);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.log(\"onChange setStorageSync mainPageFocusIndex fail!\");\r\n\t\t\t\t\t};\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.getStorageSync({\r\n\t\t\t\t\t\t\tkey: 'mainPageCommitIndex',\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tconsole.log('onChange mainPageCommitIndex异步获取 = ' + res.data);\r\n\t\t\t\t\t\t\t\tthis.currIndex = res.data;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\t\tconsole.log(\"getStorageSync mainPageCommitIndex exception!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.isFocusTab) {\r\n\t\t\t\t\tif (this.currIndex >= this.videoFocusList.length - 1) {\r\n\t\t\t\t\t\tif (this.videoFocusList.length == 0) {\r\n\t\t\t\t\t\t\tthis.currIndex = 0;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.currIndex = this.videoFocusList.length - 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.getFocusVideo();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.currIndex >= this.videoRecommendList.length - 1) {\r\n\t\t\t\t\t\tthis.currIndex = this.videoRecommendList.length - 1;\r\n\t\t\t\t\t\tthis.getRecommendVideo();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取形如 xx:xx 的时间格式\r\n\t\t\tgetSMPTEbySeconds(seconds) {\r\n\t\t\t\tlet s = Math.floor(seconds);\r\n\t\t\t\tlet m = Math.floor(s / 60);\r\n\r\n\t\t\t\tm = m % 60;\r\n\t\t\t\ts = s % 60;\r\n\r\n\t\t\t\tif (s < 10) {\r\n\t\t\t\t\ts = 0 + \"\" + s;\r\n\t\t\t\t}\r\n\t\t\t\tif (m < 10) {\r\n\t\t\t\t\tm = 0 + \"\" + m;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn m + \":\" + s;\r\n\t\t\t},\r\n\t\t\t//video时间更新触发\r\n\t\t\tbindtimeupdate(e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tif (this.data.canUpdateSlider) {\r\n\t\t\t\t\t//判断拖拽完成后才触发更新，避免拖拽失效\r\n\t\t\t\t\tlet d = e.detail.detail.duration;\r\n\t\t\t\t\tlet sliderValue = (e.detail.detail.currentTime / d) * 100;\r\n\t\t\t\t\tlet ct = this.getSMPTEbySeconds(parseInt(d * (sliderValue / 100)));\r\n\t\t\t\t\tlet et = this.getSMPTEbySeconds(parseInt(d));\r\n\t\t\t\t\tthis.currTimeStr = ct;\r\n\t\t\t\t\tthis.endTimeStr = et;\r\n\t\t\t\t\tthis.sliderValue = sliderValue;\r\n\t\t\t\t\tthis.duration = duration;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//错误处理\r\n\t\t\tbinderror(e) {\r\n\t\t\t\tconsole.log(\"catch video error:\");\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\twx.showToast({\r\n\t\t\t\t\ttitle: \"视频播放错误\",\r\n\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//播放时的处理\r\n\t\t\tbindplay(e) {\r\n\t\t\t\tlet hc = this.hiddenCover;\r\n\r\n\t\t\t\tthis.playing = true;\r\n\r\n\t\t\t\tif (hc === false) {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.hiddenCover = true;\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tswiperchange(e) {\r\n\t\t\t\tthis.currIndex = e.detail.current;\r\n\t\t\t\tconsole.log(\"swiperchange\", e);\r\n\t\t\t\tif (this.isFocusTab) {\r\n\t\t\t\t\tif (this.currIndex >= this.videoFocusList.length - 1) {\r\n\t\t\t\t\t\tif (this.videoFocusList.length == 0) {\r\n\t\t\t\t\t\t\tthis.currIndex = 0;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.currIndex = this.videoFocusList.length - 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.getFocusVideo();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.currIndex >= this.videoRecommendList.length - 1) {\r\n\t\t\t\t\t\tthis.currIndex = this.videoRecommendList.length - 1;\r\n\t\t\t\t\t\tthis.getRecommendVideo();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//滑动屏幕结束时加载下一个视频\r\n\t\t\tswiperanimateend(e) {\r\n\t\t\t\tconsole.log(\"anima\", e);\r\n\t\t\t\tconst ci = e.detail.current;\r\n\t\t\t},\r\n\r\n\t\t\t// 获取推荐视频 false\r\n\t\t\tgetRecommendVideo() {\r\n\t\t\t\tapi\r\n\t\t\t\t\t.getHomeVideo({\r\n\t\t\t\t\t\tfocus: false,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tconsole.log(\"enter getRecommendVideo res:\", res);\r\n\t\t\t\t\t\tif (res.result) {\r\n\t\t\t\t\t\t\tthis.videoRecommendList.push(res.result);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取关注视频 true，,之先判断是否login\r\n\t\t\tgetFocusVideo() {\r\n\t\t\t\tapi\r\n\t\t\t\t\t.getHomeVideo({\r\n\t\t\t\t\t\tfocus: true,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tconsole.log(\"enter getFocusVideo res:\", res);\r\n\t\t\t\t\t\tif (res.result) {\r\n\t\t\t\t\t\t\tthis.videoFocusList.push(res.result);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(\"enter getFocusVideo videoFocusList's length:\", this.videoFocusList);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 去动物详情页,之先判断是否login\r\n\t\t\ttoAnimalDetails(item) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/subPackages/animal/details?id=\" +\r\n\t\t\t\t\t\titem.animalId +\r\n\t\t\t\t\t\t\"&baseId=\" +\r\n\t\t\t\t\t\titem.baseId,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 去基地详情页，,之先判断是否login\r\n\t\t\ttoBaseDetails(item) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/subPackages/organization/details?id=\" + item.baseId\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 关注，,之先判断是否login\r\n\t\t\ttoFocus(item) {\r\n\t\t\t\tanimalApi\r\n\t\t\t\t\t.animalFocus({\r\n\t\t\t\t\t\tanimalId: item.animalId,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\titem.focused = true;\n\t\t\t\t\t\tfor(let index in this.videoRecommendList )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(item.animalId === this.videoRecommendList[index].animalId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.videoRecommendList[index].focused = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t},\n\t\t\t// 默认关注小黑妹 id=5 在正式环境\n\t\t\ttoDefaultFocus() {\n\t\t\t\tanimalApi\n\t\t\t\t\t.animalFocus({\n\t\t\t\t\t\tanimalId: 5,\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tconsole.log(\"enter toDefaultFocus OK!\");\n\t\t\t\t\t});\n\t\t\t},\r\n\t\t\t// 去捐赠，,之先判断是否login\r\n\t\t\ttoDonate(item) {\r\n\t\t\t\tconsole.log(\"enter toDonate item\", item);\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/subPackages/animal/donate?animalId=\" +\r\n\t\t\t\t\t\titem.animalId +\r\n\t\t\t\t\t\t\"&name=\" +\r\n\t\t\t\t\t\titem.animalName,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 点赞 需要有like参数，不然不能动态更新，,之先判断是否login\r\n\t\t\ttoLike(item) {\r\n\t\t\t\tthis.$set(item, \"like\", !item.like);\r\n\t\t\t\tthis.isClickSide = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.isClickSide = false;\r\n\t\t\t\t}, 200)\r\n\t\t\t},\r\n\t\t\t// 去分享，,之先判断是否login\r\n\t\t\ttoShare(item) {\r\n\t\t\t\tconsole.log(item);\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/subPackages/animal/share?id=\" + item.animalId + \"&baseId=\" + item.baseId,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 登陆获取数据\r\n\t\t\tinitData() {\r\n\t\t\t\t// 登陆成功后，拉取数据\r\n\t\t\t\tif (!this.appUserInfoFirst.nickName || this.appUserInfoFirst.nickName.length < 1) {\r\n\t\t\t\t\tconsole.log(\"appUserInfoFirst not exict!\");\r\n\t\t\t\t\tthis.hasFirstLogin = true;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.setStorageSync({\r\n\t\t\t\t\t\t\tkey: \"hasFirstLogin\",\r\n\t\t\t\t\t\t\tdata: this.hasFirstLogin,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\t\tconsole.log(\"setStorageSync token exception!\", e);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.initSingleFlowData();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.hasFirstLogin = false;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.setStorageSync({\r\n\t\t\t\t\t\t\tkey: \"hasFirstLogin\",\r\n\t\t\t\t\t\t\tdata: this.hasFirstLogin,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\t\tconsole.log(\"setStorageSync token exception!\", e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.initDoubleFlowData();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetUserProfile() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.getUserProfile({\r\n\t\t\t\t\tdesc: \"登陆注册\", // desc 字段必填\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(res, \"wx.getUserProfile res:\");\r\n\t\t\t\t\t\tconst wxUserInfo = uni.getStorageSync('wxUserInfo');\r\n\t\t\t\t\t\tthis.wxUserData = res;\r\n\t\t\t\t\t\tconsole.log(wxUserInfo, \"uni getStorageSync wxUserInfo\");\r\n\t\t\t\t\t\tif (wxUserInfo == null || wxUserInfo != this.wxUserData.userInfo) {\r\n\t\t\t\t\t\t\tthis.setWxUserInfo(this.wxUserData.userInfo);\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t// 存在本地\r\n\t\t\t\t\t\t\t\tuni.setStorageSync({\r\n\t\t\t\t\t\t\t\t\tkey: \"wxUserInfo\",\r\n\t\t\t\t\t\t\t\t\tdata: this.wxUserData.userInfo,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\t\t\t\tconsole.log(\"setStorageSync wxUserInfo exception!\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.updateUserInfo();\n\t\t\t\t\t\tthis.changeSharePage();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\tconsole.log(res, \"getUserProfile信息获取失败原因\");\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\n\t\t\tchangeSharePage()\n\t\t\t{\n\t\t\t\tconsole.log(\"enter changeSharePage!\");\n\t\t\t\tif (this.isAuthed) {\n\t\t\t\t\tif(this.shareAnamalId>0&&this.shareBaseId>0)\n\t\t\t\t\t{\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl: \"/subPackages/animal/details?id=\" +\n\t\t\t\t\t\t\t\tthis.shareAnamalId +\n\t\t\t\t\t\t\t\t\"&baseId=\" +\n\t\t\t\t\t\t\t\tthis.shareBaseId,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if(this.shareBaseId>0)\n\t\t\t\t\t{\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl: \"/subPackages/organization/details?id=\" + this.shareBaseId\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\r\n\t\t\tupdateUserInfo() {\r\n\t\t\t\tconsole.log('需要更新用户信息', this.wxUserData);\r\n\t\t\t\tapi.updateProfile({\r\n\t\t\t\t\tencryptedData: this.wxUserData.encryptedData,\r\n\t\t\t\t\tiv: this.wxUserData.iv,\r\n\t\t\t\t\trawData: this.wxUserData.rawData,\r\n\t\t\t\t\tsignature: this.wxUserData.signature\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tthis.setUserInfo(res.result);\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tuni.setStorageSync({\r\n\t\t\t\t\t\t\t\tkey: \"hasFirstLogin\",\r\n\t\t\t\t\t\t\t\tdata: false,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.hasFirstLogin = false;\n\t\t\t\t\t\t\tthis.toDefaultFocus();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.initData();\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\t\t\tconsole.log(\"setStorageSync hasFirstLogin exception!\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconsole.log(\"result updateProfile,hasFirstLogin:\", res);\r\n\t\t\t\t});\r\n\t\t\t},\n\t\t\tgetShareId()\n\t\t\t{\n\t\t\t\tconsole.log(\"enter getShareId!\");\n\t\t\t\t//从本地缓存中 同步获取指定 key 对应的内容\n\t\t\t\tuni.getStorageSync({\n\t\t\t\t\tkey: 'shareAnamalId',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log('onChange shareAnamalId异步获取 = ' + res.data);\n\t\t\t\t\t\tthis.shareAnamalId = res.data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tuni.getStorageSync({\n\t\t\t\t\tkey: 'shareBaseId',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log('onChange shareBaseId异步获取 = ' + res.data);\n\t\t\t\t\t\tthis.shareBaseId = res.data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生命周期函数--监听页面加载\r\n\t\t */\r\n\t\tonLoad() {\n\t\t\tconsole.log(\"enter onLoad !\");\r\n\t\t},\r\n\r\n\t\tonShow() {\r\n\t\t\tconsole.log(\"enter onShow videoID!\", this.videoID);\r\n\t\t\tthis.setTabBarStyle();\r\n\t\t\tif (this.isAuthed) {\r\n\t\t\t\tthis.initData();\n\t\t\t\tthis.changeSharePage();\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t/* --------- */\r\n\tpage {\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.page-main {\r\n\t\tpadding: 0;\r\n\t}\r\n\r\n\t.page-main .page-content {\r\n\t\tposition: fixed;\r\n\t}\r\n\r\n\t.page-main .tab-content {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 750rpx;\r\n\t\theight: 88rpx;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.page-main .van-tabs__scroll.van-tabs__scroll--line {\r\n\t\tbackground-color: transparent;\r\n\t}\r\n\r\n\t.page-main .vab-tab,\r\n\t.page-main .van-tab--active .van-ellipsis {\r\n\t\tcolor: #64C8B3;\r\n\t}\r\n\r\n\t.page-main .van-tabs__line {\r\n\t\tbackground-color: #64C8B3 !important;\r\n\t}\r\n\r\n\t.page-main van-tab {\r\n\t\twidth: 750rpx;\r\n\t\theight: 100px;\r\n\t}\r\n\r\n\t.page-main .van-ellipsis {\r\n\t\tcolor: #FFB30D;\r\n\t}\r\n\r\n\t.page-main video {\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.page-main .swiper-container {\r\n\t\theight: 100%;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.page-main .video-container {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.page-main .my-player {\r\n\t\tposition: absolute;\r\n\t\tz-index: -1;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.page-main .right-side {\r\n\t\twidth: 100rpx;\r\n\t\tposition: absolute;\r\n\t\tz-index: 9999;\r\n\t\ttop: 335rpx;\r\n\t\tright: 23rpx;\r\n\t\tfont-size: 12px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.page-main .right-side icon {\r\n\t\tline-height: 16px;\r\n\t\tfont-size: 34px;\r\n\t}\r\n\r\n\t.page-main .animal-avator {\r\n\t\theight: 80rpx;\r\n\t\twidth: 80rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tborder: 1px solid #fff;\r\n\t}\r\n\r\n\t.page-main .donate-cake {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t}\r\n\r\n\t.page-main .right-side-item {\r\n\t\tdisplay: flex;\r\n\t\tz-index: 9999;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.page-main .right-side-item-icon-wrapper {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.page-main .right-side-item-icon-wrapper .focus-wrapper {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 22rpx;\r\n\t\tbackground-color: #64c8b3;\r\n\t\t/* border-radius: ; */\r\n\t\theight: 28rpx;\r\n\t\twidth: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tborder-radius: 8rpx;\r\n\t}\r\n\r\n\t.page-main .right-side-item-icon-wrapper .focus-icon {\r\n\t\tposition: relative;\r\n\t\ttop: -12rpx;\r\n\t\tfont-size: 10px;\r\n\t}\r\n\r\n\t.page-main .bottom-side {\r\n\t\tposition: absolute;\r\n\t\tz-index: 9999;\r\n\t\tbottom: 0;\r\n\t\tpadding-left: 32rpx;\r\n\t\tpadding-right: 32rpx;\r\n\t\tpadding-bottom: 40rpx;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.page-main .bottom-side .bottom-item {\r\n\t\theight: 58rpx;\r\n\t\tz-index: 9999;\r\n\t\tbackground: rgba(0, 0, 0, 0.4);\r\n\t\tborder-radius: 24rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 14px;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tmax-width: 360rpx;\r\n\t}\r\n\r\n\t.page-main .bottom-side .bottom-item .bottom-avator-wrapper {\r\n\t\theight: 48rpx;\r\n\t\twidth: 48rpx;\r\n\t\tmargin-right: 12rpx;\r\n\t}\r\n\r\n\t.page-main .bottom-side .bottom-item .avator-image {\r\n\t\theight: 48rpx;\r\n\t\twidth: 48rpx;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.page-main .bottom-side .bottom-item .bottom-name-wrapper {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.page-main .bottom-side .bottom-side-description {\r\n\t\theight: 200rpx;\r\n\t\tfont-size: 14px;\r\n\t\tfont-family: PingFangSC-Semibold, PingFang SC;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #FFB30D;\r\n\t\tline-height: 17px;\r\n\t\ttext-shadow: 0px 1px 2px rgba(102, 102, 102, 0.5);\r\n\t}\r\n\r\n\t.page-main .bottom-side .bottom-name {\r\n\t\twhite-space: nowrap;\r\n\t\tdisplay: inline-block;\r\n\t\tmax-width: 260rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.page-main .bottom-side .icon-right {\r\n\t\tfont-size: 14px;\r\n\t\tposition: relative;\r\n\t\ttop: -2rpx;\r\n\t}\r\n\r\n\t.get-info {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\ttext-align: center;\r\n\t\topacity: 0;\r\n\t\t/* z-index: 9999; */\r\n\t}\r\n\r\n\t.page-bottom-btns {\r\n\t\tpadding: 24rpx 32rpx;\r\n\t\tposition: fixed;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tbox-shadow: 1px 1px 1px #000;\r\n\t\tbottom: 400rpx;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.page-bottom-btns button {\r\n\t\tflex: 1;\r\n\t\tfont-size: 16px;\r\n\t\theight: 100rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tborder-radius: 20px;\r\n\t\t/* font-family: PingFangSC-Semibold, PingFang SC; */\r\n\t}\r\n\r\n\t.page-bottom-btns button+button {\r\n\t\tmargin-left: 30rpx;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1661212295508\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}