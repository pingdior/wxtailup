{"version":3,"sources":["uni-app:///main.js","webpack:////Users/chenping/7 kalastar/tailup/uniapp/subPackages/animal/animalEdit/VideoUpload.vue?8a43","webpack:////Users/chenping/7 kalastar/tailup/uniapp/subPackages/animal/animalEdit/VideoUpload.vue?8164","webpack:////Users/chenping/7 kalastar/tailup/uniapp/subPackages/animal/animalEdit/VideoUpload.vue?30f5","webpack:////Users/chenping/7 kalastar/tailup/uniapp/subPackages/animal/animalEdit/VideoUpload.vue?c2ed","uni-app:///subPackages/animal/animalEdit/VideoUpload.vue","webpack:////Users/chenping/7 kalastar/tailup/uniapp/subPackages/animal/animalEdit/VideoUpload.vue?af42","webpack:////Users/chenping/7 kalastar/tailup/uniapp/subPackages/animal/animalEdit/VideoUpload.vue?fab5"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"subPackages/animal/animalEdit/VideoUpload.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subPackages/animal/animalEdit/VideoUpload.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./VideoUpload.vue?vue&type=template&id=8f134334&\"\nvar renderjs\nimport script from \"./VideoUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoUpload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoUpload.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subPackages/animal/animalEdit/VideoUpload.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./VideoUpload.vue?vue&type=template&id=8f134334&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./VideoUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./VideoUpload.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page-main video-container\">\r\n\t\t<view style=\"display: flex;\">\r\n\t\t\t<image v-if=\"thumbTempFile\" class=\"slot-image\" :src=\"thumbTempFile\" will-change: transform></image>\r\n\t\t\t<view v-else class=\"slot-image slot-image-null\" @click=\"chooseFi\">\r\n\t\t\t\t<view class=\"is-add\">\r\n\t\t\t\t\t<view class=\"add-line\"></view>\r\n\t\t\t\t\t<view class=\"add-line rotate\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"add-text\">新增</text>\r\n\t\t\t</view>\n\t\t\t<button @click=\"uploadMedia\" class=\"box2 flex-col\"><text class=\"info5\">发布</text></button>\n\t\t\t<!-- <view class=\"layer3\"> -->\r\n\t\t\t<!-- </view> -->\r\n\t\t</view>\r\n\t\t<view class=\"status-frame\">\r\n\t\t\t<view><text class=\"status-name\">时期</text></view>\r\n\t\t\t<picker @change=\"bindPickerChange\" :value=\"indexHealth\" :range=\"animalSuccorTypes\">\r\n\t\t\t\t<view class=\"status-key\">{{animalSuccorTypes[indexHealth]}}</view>\r\n\t\t\t</picker>\r\n\t\t</view>\r\n\t\t<textarea class=\"title-frame\" type=\"text\" @input=\"onKeyInput\" auto-blur=true maxlength=\"45\" :value=\"title\"\r\n\t\t\tplaceholder-style=\"top:0px\">\r\n\t\t</textarea>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tconst api = require(\"../../../utils/api/animal\");\r\n\tconst util = require(\"../../../utils/util\");\r\n\tconst VodUploader = require(\"../../../utils/vod-wx-sdk-v2.js\")\r\n\timport {\r\n\t\tmapState\r\n\t} from \"vuex\";\r\n\r\n\t// from txc upload vidio\r\n\t// 选择相册\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tthumbTempFile: \"\",\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\tanimalName: \"\",\r\n\t\t\t\thealth: \"\",\r\n\t\t\t\tindexHealth: 0,\r\n\t\t\t\tduration: 0,\r\n\t\t\t\tsourceType: ['album'], // 从相册取得\r\n\t\t\t\tdefaultVideoblumPath: [\"../../../static/images/base.png\"],\r\n\t\t\t\tprogress: 0, // 进程条 \r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tanimalSuccorTypes: (state) => state.tags.succorTag, // 动物状态\r\n\t\t\t}),\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit() {\r\n\t\t\t\t// 得到默认indexHealth\r\n\t\t\t\tfor (this.indexHealth in this.animalSuccorTypes) {\r\n\t\t\t\t\tif (this.animalSuccorTypes[this.indexHealth] == this.health) {\r\n\t\t\t\t\t\tconsole.log(\"enter init break indexHeath:\", this.indexHealth);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.title = this.animalName + util.formatTime() + \"的活动\";\r\n\t\t\t\tconsole.log(\"enter init title:\", this.title);\r\n\t\t\t},\r\n\r\n\t\t\tbindPickerChange: function(e) {\r\n\t\t\t\tconsole.log('picker发送选择改变，携带值为', e.target.value)\r\n\t\t\t\tthis.indexHealth = e.target.value\r\n\t\t\t},\r\n\r\n\t\t\tonKeyInput: function(event) {\r\n\t\t\t\tthis.title = event.target.value\r\n\t\t\t},\r\n\r\n\t\t\tbackUpPage() {\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1,\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\r\n\t\t\tchooseFi() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tuni.chooseMedia({\r\n\t\t\t\t\tcount: 1, // 只取一个文件\r\n\t\t\t\t\tmediaType: ['video'],\r\n\t\t\t\t\tsourceType: this.sourceType,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(\"enter chooseMedia res:\", res);\r\n\t\t\t\t\t\tlet tempFile = res.tempFiles[0];\r\n\t\t\t\t\t\tlet resSize = tempFile.size;\r\n\t\t\t\t\t\tif (resSize > 377487360) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"上传的视频大小不超过360M\",\r\n\t\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\tdelta: 1,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//限制视频类型\r\n\t\t\t\t\t\tlet resType = tempFile.tempFilePath.slice(-3).toLowerCase();\r\n\t\t\t\t\t\tconst imageTypeList = ['mp4'];\r\n\t\t\t\t\t\tif (!imageTypeList.includes(resType)) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"视频必须是mp4类型\",\r\n\t\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\tdelta: 1,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.thumbTempFile = tempFile.thumbTempFilePath;\r\n\t\t\t\t\t\tself.duration = Math.round(tempFile.duration);\r\n\t\t\t\t\t\tself.videoFile = tempFile;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(\"just leaving chooseMedia title:\", this.title);\r\n\t\t\t},\r\n\t\t\t// 选择拍摄\r\n\t\t\tchooseVi() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tuni.chooseVideo({\r\n\t\t\t\t\tsourceType: ['camera'],\r\n\t\t\t\t\tcompressed: true,\r\n\t\t\t\t\tmaxDuration: 60,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(\"enter chooseVideo res:\", res);\r\n\t\t\t\t\t\tlet tempFile = res;\r\n\t\t\t\t\t\tself.thumbTempFile = self.defaultVideoblumPath;\r\n\t\t\t\t\t\tself.duration = Math.round(tempFile.duration);\r\n\t\t\t\t\t\tself.videoFile = tempFile;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log(\"picture video fail!:\", res);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 上传视频\r\n\t\t\tuploadMedia() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tif (self.thumbTempFile == '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"请选择上传视频\",\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.title == '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写上传视频的标题\",\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// let title = \"聪聪小跑V1.3\";\r\n\t\t\t\tconst uploader = VodUploader.start({\r\n\t\t\t\t\t// 必填，获取签名的函数\r\n\t\t\t\t\tgetSignature: self.getSignature,\r\n\t\t\t\t\t// 选填，视频名称，强烈推荐填写(如果不填，则默认为“来自小程序”)\r\n\t\t\t\t\tmediaName: self.title,\r\n\t\t\t\t\t// 选填，视频封面，把 wx.chooseImage 回调的参数(file)传进来\r\n\t\t\t\t\tcoverFile: self.coverFile,\r\n\t\t\t\t\t// 必填，把 wx.chooseVideo 回调的参数(file)传进来\r\n\t\t\t\t\tmediaFile: self.videoFile,\r\n\t\t\t\t\t// 上传中回调，获取上传进度等信息\r\n\t\t\t\t\tprogress: function(result) {\r\n\t\t\t\t\t\tconsole.log('enter progress result:', result);\r\n\t\t\t\t\t\tself.progress = result.percent * 100;\r\n\t\t\t\t\t\tconsole.log('enter self.progress :', self.progress);\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: \"上传视频 \" + self.progress + \"%\",\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// 上传完成回调，获取上传后的视频 URL 等信息\r\n\t\t\t\t\tfinish: (result) => {\r\n\t\t\t\t\t\tconsole.log('enter upload finish：', result, self);\r\n\t\t\t\t\t\t//通知后台上传成功\r\n\t\t\t\t\t\tapi.postFinishUpload({\r\n\t\t\t\t\t\t\t\"animalId\": self.animalId,\r\n\t\t\t\t\t\t\t\"baseId\": self.baseId,\r\n\t\t\t\t\t\t\t\"fileId\": result.fileId,\r\n\t\t\t\t\t\t\t\"name\": self.title,\r\n\t\t\t\t\t\t\t//这里需要设置用户健康状态\r\n\t\t\t\t\t\t\t\"succorStatus\": this.animalSuccorTypes[this.indexHealth],\r\n\t\t\t\t\t\t\t\"duration\": self.duration\r\n\t\t\t\t\t\t}).then(res => console.log(\"postFinishUpload res\", res));\r\n\r\n\t\t\t\t\t\tif (self.progress === 100) {\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 触发前一页的更新\r\n\t\t\t\t\t\tlet pages = getCurrentPages(); //获取所有页面栈实例列表\r\n\t\t\t\t\t\tlet prevPage = pages[pages.length - 2]; //上一页页面实例\r\n\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\tdelta: 1,\r\n\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tprevPage.$vm.orderMediasPage = 0;\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"enter navigateBack success!\");\r\n\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"enter navigateBack fail!\");\r\n\t\t\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// 上传错误回调，处理异常\r\n\t\t\t\t\terror: function(result) {\r\n\t\t\t\t\t\tconsole.log('error');\r\n\t\t\t\t\t\tconsole.log(result);\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '上传失败',\r\n\t\t\t\t\t\t\tcontent: JSON.stringify(result),\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.uploader = uploader;\r\n\t\t\t},\r\n\t\t\tgetSignature(callback) {\r\n\t\t\t\tapi.getSignature().then(res => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tconsole.log(\"get getSignature result:\", res.result);\r\n\t\t\t\t\t\tcallback(res.result);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tconsole.log(\"enter upload video\", options);\r\n\t\t\tif (options.id) {\r\n\t\t\t\tthis.animalId = options.id;\r\n\t\t\t}\r\n\t\t\tif (options.baseId) {\r\n\t\t\t\tthis.baseId = options.baseId;\r\n\t\t\t}\r\n\t\t\tif (options.animalName) {\r\n\t\t\t\tthis.animalName = options.animalName;\r\n\t\t\t}\r\n\t\t\tthis.health = options.status;\r\n\t\t\tthis.init();\r\n\t\t\tif (options.videoTypeflag === \"0\") {\r\n\t\t\t\tthis.sourceType = ['camera'];\r\n\t\t\t\tthis.chooseVi();\r\n\t\t\t} else {\r\n\t\t\t\tthis.chooseFi();\r\n\t\t\t}\r\n\t\t\tconsole.log(\"this.sourceType\", this.sourceType);\r\n\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.page-main {\r\n\t\tpadding: 0;\r\n\t}\r\n\r\n\t.page-content {\r\n\t\tposition: fixed;\r\n\t}\r\n\r\n\t.video-container {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.outer1 {\r\n\t\tz-index: 88;\r\n\t\twidth: 343px;\r\n\t\theight: 1px;\r\n\t\tbackground-color: rgba(236, 231, 231, 1);\r\n\t}\r\n\r\n\t.slot-image {\r\n\t\tz-index: 75;\r\n\t\theight: 109px;\r\n\t\twidth: 109px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tposition: relative;\r\n\t\tleft: 20px;\r\n\t\ttop: 25px;\r\n\t}\r\n\r\n\t.slot-image-null {\r\n\t\tflex-direction: column;\r\n\t\tbackground: #F7F7F7;\r\n\t\tborder-radius: 8px;\r\n\t\tborder: 1px solid #64C8B3;\r\n\t}\r\n\r\n\t.add-text {\r\n\t\tfont-size: 14px;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #9ba1aa;\r\n\t\tline-height: 20px;\r\n\t}\r\n\r\n\t.is-add {\r\n\t\tdisplay: -webkit-box;\r\n\t\tdisplay: -webkit-flex;\r\n\t\tdisplay: flex;\r\n\t\t-webkit-box-align: center;\r\n\t\t-webkit-align-items: center;\r\n\t\talign-items: center;\r\n\t\t-webkit-box-pack: center;\r\n\t\t-webkit-justify-content: center;\r\n\t\tjustify-content: center;\r\n\t\theight: 48rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.add-line {\r\n\t\twidth: 48rpx;\r\n\t\theight: 2rpx;\r\n\t\tbackground-color: #ddd;\r\n\t\tborder-radius: 2px;\r\n\t}\r\n\r\n\t.rotate {\r\n\t\tposition: absolute;\r\n\t\t-webkit-transform: rotate(90deg);\r\n\t\ttransform: rotate(90deg);\r\n\t}\r\n\r\n\t.mod3 {\r\n\t\tz-index: 77;\r\n\t\theight: 15px;\r\n\t\tbackground-color: rgba(0, 0, 0, 0);\r\n\t\twidth: 15px;\r\n\t}\r\n\r\n\t.box1 {\r\n\t\tz-index: 71;\r\n\t\theight: 35px;\r\n\t\tborder-radius: 17.5px 17.5px 17.5px 17.5px;\r\n\t\tbackground-color: rgba(100, 200, 179, 1);\r\n\t\twidth: 140px;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.box2 {\r\n\t\tz-index: 68;\r\n\t\theight: 35px;\r\n\t\tborder-radius: 17.5px 17.5px 17.5px 17.5px;\r\n\t\tbackground-color: rgba(100, 200, 179, 1);\r\n\t\twidth: 140px;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\n\t\tmargin-right: 20px;\n\t\tmargin-top: 20px;\r\n\t}\r\n\r\n\t.box3 {\r\n\t\tz-index: 78;\r\n\t\theight: 15px;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.box4 {\r\n\t\tz-index: 81;\r\n\t\twidth: 7px;\r\n\t\theight: 7px;\r\n\t}\r\n\r\n\t.status-frame {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: nowrap;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\talign-items: flex-start;\r\n\t\tmargin-left: 11px;\r\n\t\tmargin-top: 22px;\r\n\t\twidth: 343px;\r\n\t\theight: 37px;\r\n\t}\r\n\r\n\t.status-name {\r\n\t\tz-index: 90;\r\n\t\twidth: 56px;\r\n\t\theight: 20px;\r\n\t\tdisplay: block;\r\n\t\toverflow-wrap: break-word;\r\n\t\tcolor: rgba(48, 55, 65, 1);\r\n\t\tfont-size: 14px;\r\n\t\tfont-family: PingFangSC-Semibold;\r\n\t\twhite-space: nowrap;\r\n\t\tline-height: 20px;\r\n\t\ttext-align: left;\r\n\t\tmargin-top: 20px;\r\n\t\tmargin-left: 5px;\r\n\t}\r\n\r\n\t.status-key {\r\n\t\tz-index: 91;\r\n\t\twidth: 31px;\r\n\t\theight: 37px;\r\n\t\tdisplay: block;\r\n\t\toverflow-wrap: break-word;\r\n\t\tcolor: rgba(100, 200, 179, 1);\r\n\t\tfont-size: 14px;\r\n\t\tfont-family: PingFangSC-Regular;\r\n\t\tline-height: 20px;\r\n\t\ttext-align: right;\r\n\t\tmargin-left: 245px;\r\n\t\tmargin-top: 20px;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n\r\n\t.title-frame {\r\n\t\tz-index: 83;\r\n\t\theight: 100px;\r\n\t\tborder-radius: 8px;\r\n\t\tborder: 1px solid rgba(151, 151, 151, 1);\r\n\t\tbackground-color: #FFFAE2;\r\n\t\twidth: 330px;\r\n\t\tjustify-content: flex-start;\n\t\tmargin-top: 20px;\r\n\t\tmargin-left: 20px;\n\t\talign-items: flex-end;\r\n\t\tborder-style: hidden;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.bd8 {\r\n\t\tz-index: 89;\r\n\t\twidth: 4px;\r\n\t\theight: 10px;\r\n\t\tmargin: 6px 0 0 8px;\r\n\t}\r\n\r\n\t.layer3 {\r\n\t\tdisplay: flex;\r\n\t\tz-index: auto;\r\n\t\twidth: 344px;\r\n\t\theight: 35px;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin: 273px 0 0 16px;\r\n\t}\r\n\r\n\t.progress-box {\r\n\t\twidth: 80%;\r\n\t\tmargin-top: 100rpx;\r\n\t\tmargin-left: 60rpx;\r\n\t}\r\n\r\n\t.info3 {\r\n\t\tz-index: 84;\r\n\t\tposition: absolute;\r\n\t\tleft: 5px;\r\n\t\ttop: 10px;\r\n\t\twidth: 320px;\r\n\t\theight: 21px;\r\n\t\tdisplay: block;\r\n\t\toverflow-wrap: break-word;\r\n\t\tcolor: rgba(84, 89, 102, 1);\r\n\t\tfont-size: 14px;\r\n\t\tfont-family: PingFangSC-Regular;\r\n\t\twhite-space: nowrap;\r\n\t\tline-height: 21px;\r\n\t\ttext-align: left;\r\n\t}\r\n\r\n\t.info4 {\r\n\t\tz-index: 72;\r\n\t\theight: 22px;\r\n\t\tdisplay: block;\r\n\t\toverflow-wrap: break-word;\r\n\t\tcolor: rgba(255, 255, 255, 1);\r\n\t\tfont-size: 16px;\r\n\t\tfont-family: PingFangSC-Semibold;\r\n\t\twhite-space: nowrap;\r\n\t\tline-height: 34px;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.info5 {\r\n\t\tz-index: 69;\r\n\t\theight: 22px;\r\n\t\tdisplay: block;\r\n\t\toverflow-wrap: break-word;\r\n\t\tcolor: rgba(255, 255, 255, 1);\r\n\t\tfont-size: 16px;\r\n\t\tfont-family: PingFangSC-Semibold;\r\n\t\twhite-space: nowrap;\r\n\t\tline-height: 34px;\r\n\t\ttext-align: center;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./VideoUpload.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./VideoUpload.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1661212295511\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}