(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/animal/animalEdit/editFormItem"],{"0f29":function(t,e,i){"use strict";i.r(e);var a=i("c88b"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"3f0a":function(t,e,i){"use strict";(function(t){i("a09d");a(i("66fd"));var e=a(i("a28c"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},"523d":function(t,e,i){"use strict";var a=i("a4e4"),n=i.n(a);n.a},5337:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={uniIcons:function(){return Promise.all([i.e("common/vendor"),i.e("components/uni-icons/uni-icons")]).then(i.bind(null,"37fa"))},uniPopup:function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"1b59"))},uniPopupDialog:function(){return Promise.all([i.e("common/vendor"),i.e("components/uni-popup-dialog/uni-popup-dialog")]).then(i.bind(null,"f103"))}},n=function(){var t=this,e=t.$createElement,i=(t._self._c,"camera"!==t.editItem.type&&"input"!==t.editItem.type&&"number"!==t.editItem.type&&"textarea"!==t.editItem.type&&"date"!==t.editItem.type&&"picker"!==t.editItem.type&&"tags"===t.editItem.type?t.__map(t.tagsList,(function(e,i){var a=t.__get_orig(e),n=t.checkedTags.includes(e);return{$orig:a,g0:n}})):null);t.$mp.data=Object.assign({},{$root:{l0:i}})},s=[]},a28c:function(t,e,i){"use strict";i.r(e);var a=i("5337"),n=i("0f29");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("523d");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);e["default"]=c.exports},a4e4:function(t,e,i){},c88b:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("26cb");function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){o(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i("c1aa");var r=i("2e3e"),c={data:function(){return{value:"",placeholder:"",formData:{},editItem:{},list:[],listIndex:-1,listValue:"",checkedTags:[],pickerIndex:0,uploadUrl:r.baseUrl,identityImageId:"",petId:""}},computed:s(s({},(0,a.mapState)({animalSex:function(t){return t.tags.animalSex},identityCode:function(t){return t.tags.identityCode},animalTypes:function(t){return t.tags.animalTypes},sameOrigin:function(t){return t.tags.sameOrigin},isAdopted:function(t){return t.tags.isAdopted},healthTag:function(t){return t.tags.healthTag},shapeTag:function(t){return t.tags.shapeTag},characterTag:function(t){return t.tags.characterTag},succorTag:function(t){return t.tags.succorTag}})),{},{pickerArray:function(){return"isAdopted"===this.editItem.key?this.isAdopted:"sameOrigin"===this.editItem.key?this.sameOrigin:"sex"===this.editItem.key?this.animalSex:"identityCode"===this.editItem.key?this.identityCode:"type"===this.editItem.key?this.animalTypes:void 0},tagsList:function(){return"characterDesc"===this.editItem.key?this.characterTag:"healthStatus"===this.editItem.key?this.healthTag:"shapeDesc"===this.editItem.key?this.shapeTag:"succorStatus"===this.editItem.key?this.succorTag:void 0},isTagsSingle:function(){var t=["succorStatus"];return t.includes(this.editItem.key)}}),methods:{bindDateChange:function(t){this.value=t.target.value},cameraTakePhoto:function(){var e=this,i=t.createCameraContext();i.takePhoto({quality:"high",success:function(i){var a=i.tempImagePath;console.log("takePhoto tempImagePath:",a);var n=e.uploadUrl+"/animal/identify";t.uploadFile({url:n,filePath:a,header:{"Access-Token":e.$store.state.user.token},name:"image",formData:{type:e.formData.type},success:function(i){var a=JSON.parse(i.data);console.log("success uploadFile data",a),200===a.status||3012===a.code?(console.log("res.result is 200 or 3012!"),null!=a.result?(e.value=a.result.identityCode,e.identityImageId=a.result.identityImageId,e.petId=a.result.petId,console.log("res.result is success,data.status is 200,this.identityCode!",a.result.identityCode),t.navigateBack({delta:1})):(console.log("uploadFileRes ok, but res.result is null!"),t.showToast({title:"获取身份号异常!",icon:"error",duration:2e3}))):t.showToast({title:a.msg,icon:"error",duration:2e3})}})},fail:function(t){console.log("choose image fail!",t)}})},cameraError:function(t){console.log(t.detail)},bindPickerChange:function(t){var e=this;console.log(t),this.pickerIndex=t.target.value,"sameOrigin"===this.editItem.key?(console.log(this.sameOrigin.find((function(t,i){return i==e.pickerIndex}))),this.value=this.sameOrigin.find((function(t,i){return i==e.pickerIndex})).id):this.value=this.pickerIndex},getDate:function(t){var e=new Date,i=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return"startDate"===t?i-=60:"endDate"===t&&(i+=2),a=a>9?a:"0"+a,n=n>9?n:"0"+n,"".concat(i,"-").concat(a,"-").concat(n)},removeListItem:function(t){this.list.splice(t,1)},editListItem:function(t){this.listValue=this.list[t],this.listIndex=t,this.$refs.popup.open()},toAdd:function(){this.listValue="",this.listIndex=-1,this.$refs.popup.open(),console.log(this.$refs)},listConfirm:function(t){var e;(e=console).log.apply(e,[this.value].concat(Array.prototype.slice.call(arguments))),-1!==this.listIndex?this.list[this.listIndex]=t:this.list.push(t),this.listCancel()},listCancel:function(){this.$refs.popup.close(),this.listIndex=-1,this.listValue=""},toToggleTags:function(t){if(console.log(this.checkedTags),this.isTagsSingle)this.checkedTags=[t];else{var e=this.checkedTags.findIndex((function(e){return e===t}));-1!==e?this.checkedTags.splice(e,1):this.checkedTags.push(t)}}},onShow:function(){var e=this;console.log("ss",this.$store.state.tags),t.getStorage({key:"animalData",success:function(t){if(console.log(t.data),e.formData=t.data,e.editItem=t.data.editItem,"list"===e.editItem.type){var i=t.data[t.data.editItem.key];e.list=""!=i?i.split("/"):[]}else if("tags"===e.editItem.type){var a=t.data[t.data.editItem.key];e.checkedTags=""!=a?a.split("/"):[]}else e.value=t.data[t.data.editItem.key];e.placeholder=t.data[t.data.editItem.placeholder],e.formData.succorTime||(e.formData.succorTime=e.getDate({format:!0}))}})},onUnload:function(){"list"===this.editItem.type?this.formData[this.editItem.key]=this.list.join("/"):"tags"===this.editItem.type?this.formData[this.editItem.key]=this.checkedTags.join("/"):"identityCode"===this.editItem.key&&this.value&&this.value.length>0?(this.formData["identityCode"]=this.value,this.formData["identityImageId"]=this.identityImageId,this.formData["petId"]=this.petId):this.formData[this.editItem.key]=this.value,console.log("onUnLoad data store:",this.formData),t.setStorage({key:"animalData",data:this.formData})}};e.default=c}).call(this,i("543d")["default"])}},[["3f0a","common/runtime","common/vendor"]]]);