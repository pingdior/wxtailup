(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/animal/details"],{"17ab":function(e,a,t){"use strict";var n;t.d(a,"b",(function(){return i})),t.d(a,"c",(function(){return o})),t.d(a,"a",(function(){return n}));var i=function(){var e=this,a=e.$createElement,t=(e._self._c,e.splitToArray(e.animalInfo.succorStatus)),n=e.splitToArray(e.animalInfo.healthStatus),i=e.__map(e.orderMedias,(function(a,t){var n=e.__get_orig(a),i=a.thumbnail?Math.round(a.duration):null,o=e.isBaseOwnerUser?e.isDeleteArrayItem(a.id):null,s=e.isBaseOwnerUser?e.isDeleteArrayItem(a.id):null;return{$orig:n,g0:i,m0:o,m1:s}}));e.$mp.data=Object.assign({},{$root:{l0:t,l1:n,l2:i}})},o=[]},"423f":function(e,a,t){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=t("26cb");function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){s(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var r=t("c1aa"),l={name:"Details",components:{},data:function(){return{id:0,indicatorDots:!0,vertical:!1,autoplay:!1,interval:2e3,duration:500,orderMediasPage:0,orderMediasPageSize:10,active:0,animalInfo:{tags:[{tag:"康复中",status:"1"}],status:["已免疫","已驱虫","未绝育"],userID:0,isAdopted:0,sameOrigin:1},orderMedias:{},orderResultMedias:{},focus:!1,noData:!1,orderMediasMaxPages:0,deletStatusArray:[0]}},onReachBottom:function(){console.log("enter onReachBottom orderMediasMaxPages:",this.orderMediasMaxPages),this.orderMediasPage>=this.orderMediasMaxPages?this.noData=!0:(this.getAnimalOrderMedias(),console.log("leave  onReachBottom!"))},computed:o(o({},(0,n.mapState)({appUserInfo:function(e){return e.user.userInfo},videoPublicStatus:function(e){return e.tags.videoPublicStatus}})),{},{isBaseOwnerUser:function(){return this.animalInfo.userID==this.appUserInfo.id}}),methods:{initData:function(){console.log("enter initData appUserInfo!",this.appUserInfo),this.getAnimalHomeInfo(),this.getAnimalOrderMedias()},isDeleteArrayItem:function(e){return this.deletStatusArray.includes(e)},getAnimalOrderMedias:function(){var e=this;console.log("enter getAnimalOrderMedias!"),this.orderMediasPage+=1,r.animalOrderMedias({animalId:this.id,current:this.orderMediasPage,size:this.orderMediasPageSize}).then((function(a){if(console.log("enter return animalOrderMedias:",a),a.result&&a.result.records&&a.result.records.length>0){if(console.log("enter res copy orderMedias orderMediasPage:",e.orderMediasPage),e.orderMediasPage>1){for(var t in e.orderResultMedias=a.result.records,e.orderResultMedias)e.orderMedias.push(e.orderResultMedias[t]);console.log("leaving concatArrays orderResultMedias>1:",e.orderMedias)}else e.orderMedias=a.result.records,console.log("leaving concatArrays orderResultMedias<1:",e.orderMedias);e.orderMediasMaxPages=a.result.pages}else console.log("Medias is null in getAnimalOrderMedias!"),e.noData=!0}))},getAnimalInfo:function(){r.getAnimalBasicInfo({animalId:this.id}).then((function(e){console.log("enter getAnimalBasicInfo:",e)}))},getAnimalHomeInfo:function(){var e=this;r.getAnimalHomeInfo({animalId:this.id}).then((function(a){console.log(a,"animal-homeInfo"),e.animalInfo=a.result,e.animalInfo.shapeDesc=a.result.shapeDesc.split("/"),e.animalInfo.characterDesc=a.result.characterDesc.split("/"),e.animalInfo.healthStatus=a.result.healthStatus,e.animalInfo.succorStatus=a.result.succorStatus,e.animalInfo.userID=a.result.user.id,e.focus=a.result.focused,e.animalInfo.isAdopted=a.result.isAdopted,e.animalInfo.sameOrigin=a.result.sameOrigin}))},changeName:function(e){var a=e.target.value;a&&a.length>0&&r.changeName({animalId:this.id,name:a}).then((function(e){console.log("enter changeName res:",e)}))},toDonate:function(){e.navigateTo({url:"/subPackages/animal/donate?animalId="+this.id+"&name="+this.animalInfo.name})},toAdopt:function(){e.navigateTo({url:"/subPackages/adopt/form?animalId="+this.id+"&baseId="+this.animalInfo.baseId+"&userId="+this.animalInfo.userID})},toFocus:function(){var a=this;this.focus=!this.focus,r.animalFocus({animalId:this.id}).then((function(t){e.showToast({title:a.focus?"关注成功":"取消关注"})}))},toEdit:function(){console.log("enter animalEdit!"),e.navigateTo({url:"/subPackages/animal/animalEdit/newEdit?animalId="+this.id+"&baseId="+this.animalInfo.baseId+"&userId="+this.animalInfo.userID})},toShare:function(){console.log(this.animalInfo),e.navigateTo({url:"./share?id="+this.id+"&baseId="+this.animalInfo.baseId})},toBase:function(a){console.log("to-base",a),e.navigateTo({url:"/subPackages/organization/details?id="+a})},onChange:function(e){},toAddVideo:function(){e.navigateTo({url:"./animalEdit/VideoUpload?id="+this.id+"&baseId="+this.animalInfo.baseId+"&status="+this.animalInfo.succorStatus+"&videoTypeflag=1&animalName="+this.animalInfo.name})},toCameraVideo:function(){e.navigateTo({url:"./animalEdit/VideoUpload?id="+this.id+"&baseId="+this.animalInfo.baseId+"&status="+this.animalInfo.succorStatus+"&videoTypeflag=0&animalName="+this.animalInfo.name})},splitToArray:function(e){return e?e.split("/"):[]},toDelete:function(a){var t=this;console.log("enter toDelete item:",a),e.showModal({content:"确定删除【"+a.name+"】视频吗？",success:function(n){n.confirm&&r.deletAnimalOneVideo({id:a.id}).then((function(n){n.success?(t.deletStatusArray.push(a.id),console.log("show deletStatusArray:",t.deletStatusArray),e.showToast({title:"删除成功"})):e.showToast({title:"删除失败"})}))}})},playVideo:function(a){console.log("enter playVideo id:",a),e.navigateTo({url:"./animalEdit/VideoPic?id="+this.id+"&videoId="+a})}},onLoad:function(e){console.log(e,"animal-details"),this.id=e.id},onShareAppMessage:function(e){return"button"===e.from&&console.log("enter onShareAppMessage:",e.target),{title:this.animalInfo.name+"的故事分享",path:this.upShareFileUrl}},onShow:function(){console.log(" enter onShow!"),this.initData()}};a.default=l}).call(this,t("543d")["default"])},"5dc2":function(e,a,t){"use strict";t.r(a);var n=t("423f"),i=t.n(n);for(var o in n)"default"!==o&&function(e){t.d(a,e,(function(){return n[e]}))}(o);a["default"]=i.a},"6ee7":function(e,a,t){},"72eb":function(e,a,t){"use strict";var n=t("6ee7"),i=t.n(n);i.a},9931:function(e,a,t){"use strict";t.r(a);var n=t("17ab"),i=t("5dc2");for(var o in i)"default"!==o&&function(e){t.d(a,e,(function(){return i[e]}))}(o);t("72eb");var s,r=t("f0c5"),l=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);a["default"]=l.exports},"9f82":function(e,a,t){"use strict";(function(e){t("a09d");n(t("66fd"));var a=n(t("9931"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(a.default)}).call(this,t("543d")["createPage"])}},[["9f82","common/runtime","common/vendor"]]]);