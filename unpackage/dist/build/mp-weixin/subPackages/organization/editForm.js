(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/organization/editForm"],{"2cbb":function(e,t,o){},"31c5":function(e,t,o){"use strict";var a=o("2cbb"),n=o.n(a);n.a},6546:function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return a}));var a={uniList:function(){return o.e("components/uni-list/uni-list").then(o.bind(null,"bc51"))},uniListItem:function(){return o.e("components/uni-list-item/uni-list-item").then(o.bind(null,"d4b5"))}},n=function(){var e=this,t=e.$createElement;e._self._c},i=[]},b9fc:function(e,t,o){"use strict";o.r(t);var a=o("6546"),n=o("c0f3");for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);o("31c5");var s,r=o("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);t["default"]=c.exports},c0f3:function(e,t,o){"use strict";o.r(t);var a=o("d2a6"),n=o.n(a);for(var i in a)"default"!==i&&function(e){o.d(t,e,(function(){return a[e]}))}(i);t["default"]=n.a},d2a6:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o("4672"),n=o("2e3e"),i=o("8141"),s={components:{},data:function(){return{defaultImage:"../../static/images/default_avator.png",userImage:"",imageList:[],formData:{id:"",backgroundPics:[],avator:"",name:"",manager:"",mobile:"",weixin:"",addr:"",certification:!1,intro:"",answer:"",isEdit:!1},formItemPlaceHolder:{name:"基地名称",manager:"负责人姓名",mobile:"手机号",addr:"地址",intro:"简介"},uploadUrl:n.baseUrl}},methods:{getData:function(){var e=this;i.getBaseInfo({baseId:this.formData.id}).then((function(t){console.log(t,"ddd"),e.formData=t.result}))},onClick:function(t){this.formData.isEdit=!0,this.formData.editItem={placeholder:this.formItemPlaceHolder[t],key:t,type:["intro","addr"].includes(t)?"textarea":"text"},console.log(this.formData,t),e.navigateTo({url:"./editFormItem"})},removeImage:function(e){this.imageList.splice(e,1)},chooseImage:function(){var t=this;e.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album"],success:function(o){console.log(o),o.tempFiles.forEach((function(o){var n=o.size;if(n>10485760)e.showToast({title:"上传的图片大小不超过10M",icon:"none",duration:2e3,mask:!0});else{var i=o.path.slice(-3).toLowerCase(),s=["bmp","png","jpg"];if(s.includes(i)){t.imageList.push(o.path);var r=t.uploadUrl+"/upload/base/image";e.uploadFile({url:r,filePath:o.path,header:{"Access-Token":t.$store.state.user.token},name:"image",success:function(e){console.log(e);var o=JSON.parse(e.data);t.formData.imageIds.push(a.baseImageUrl+o.result)}})}else e.showToast({title:"图片必须是bmp, png或jpg类型",icon:"none",duration:2e3,mask:!0})}}))}})},chooseAvator:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(o){console.log(o),o.tempFiles.forEach((function(o){var n=o.size;if(n>10485760)e.showToast({title:"上传的图片大小不超过10M",icon:"none",duration:2e3,mask:!0});else{var i=o.path.slice(-3).toLowerCase(),s=["bmp","png","jpg"];if(s.includes(i)){t.userImage=o.path;var r=t.uploadUrl+"/upload/base/image";e.uploadFile({url:r,filePath:o.path,header:{"Access-Token":t.$store.state.user.token},name:"image",success:function(e){console.log(e);var o=JSON.parse(e.data);t.formData.headImageId=a.baseImageUrl+o.result}})}else e.showToast({title:"图片必须是bmp, png或jpg类型",icon:"none",duration:2e3,mask:!0})}}))}})},onConfirm:function(){var t=this;console.log("完成",this.formData),i.postBase(this.formData).then((function(o){var a="新增成功";t.formData.id&&(a="修改成功"),console.log("enter onConfirm res:",o),e.showToast({duration:2e3,title:a});var n=getCurrentPages(),i=n[n.length-2];setTimeout((function(){e.navigateBack({delta:1,success:function(){try{i.$vm.initData(),i.$vm.$refs.userRef.getUserInfo(),console.log("enter onConfirm success!")}catch(e){console.log("enter onConfirm fail!"),console.log(e)}}})}),2e3)}))}},onShow:function(){var t=this;console.log("show"),this.formData.isEdit&&e.getStorage({key:"origanzationData",success:function(e){console.log("edit",e.data),t.formData=e.data}})},onHide:function(){console.log("hide"),e.setStorage({key:"origanzationData",data:this.formData})},onLoad:function(e){console.log(e),e.organizationId&&(this.formData.id=e.organizationId,this.getData()),console.log("load")},onUnload:function(){console.log("unload"),e.removeStorage({key:"origanzationData"})}};t.default=s}).call(this,o("543d")["default"])},f23c:function(e,t,o){"use strict";(function(e){o("a09d");a(o("66fd"));var t=a(o("b9fc"));function a(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=o,e(t.default)}).call(this,o("543d")["createPage"])}},[["f23c","common/runtime","common/vendor"]]]);